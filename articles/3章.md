## 3章，图片优化


png8/png24/png32之间的区别  
png8 —— 256色 + 支持透明  
png24 —— 2^24色 + 不支持透明  
png32 —— 2^24色 + 支持透明   



jpg有损压缩，压缩率高，不支持透明  
png支持透明，浏览器兼容好  
webp压缩程度更好，在ios webview有兼容性问题    
svg矢量图，代码内嵌，相对较小，图片样式相对简单的场景  


jpg —— 大部分不需要透明图片的业务场景  
png —— 大部分需要透明图片的业务场景  
webp —— 安卓全部  
svg矢量图 —— 图片样式相对简单的业务场景，如 iconfont


图片优化方案：

	1. 进行图片压缩，针对真实图片情况，舍弃一些相对无关紧要的色彩信息  
	2. CSS雪碧图，把你的网站上用到的一些图片整合到一张单独的图片中，减少你的网站的HTTP请求数量  
			
			缺点：如果大雪碧图没出来，整个页面的图片都出不来
			整合图片比较大时，一次加载比较慢
			维护比较麻烦
		
		
	3. 将图片的内容内嵌到html当中，图片过小，消耗主要在网络请求中  
			
			将图片内嵌入到Html中，最好的方法就是用Base64 string
			我们把图像文件的内容直接写在了HTML 文件中，这样做的好处是，节省了一个HTTP 请求。坏处呢，就是浏览器不会缓存这种图像。
			
						
			
	4. 使用SVG进行矢量图的绘制，使用iconfont解决icon问题   
	5. 在安卓下使用webp


## 3-5 facebook首页

	可以看到，有很多雪碧图，但是并没有把所有icon放到同一张雪碧图上
	根据业务场景拆分
	
	
## 3-7 如何使用雪碧图、svg


	fis2可以通过插件把png图片转换成webp
	
	www.spritecow.com  //制作雪碧图的网址，点击图片可以获取代码
	
	

## 问题

### 1. 使用base64, 优缺点

1. 减少一个http请求
3. 图片必须足够小
4. 根据 base64 的编码原理，大小比原文件大小大 1/3
5. 尽管图片请求少了，但是 HTML 文件本身尺寸会变大，会影响首屏加载，所以要权衡代码看起来会有点丑，大量编码字符（当然也可以通过构建工具动态插入）
6. base64 无法缓存，要缓存只能缓存包含 base64 的文件，比如 HTML 或者 CSS，这相比直接缓存图片要弱很多，一般 HTM 会改动频繁，所以等同于得不到缓存效益

作者：goddyzhao
链接：https://www.zhihu.com/question/31155574/answer/222258948
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。




将图片内嵌入到Html中，最好的方法就是用Base64 string


我们把图像文件的内容直接写在了HTML 文件中，这样做的好处是，节省了一个HTTP 请求。坏处呢，就是浏览器不会缓存这种图像。
			
			

如果图片足够小且因为用处的特殊性无法被制作成雪碧图（CssSprites），在整个网站的复用性很高且基本不会被更新。

那么此时使用 base64 编码传输图片就可谓好钢用在刀刃上，思前想后，符合这个规则的，有一个是我们经常会遇到的，就是页面的背景图 background-image 。在很多地方，我们会制作一个很小的图片大概是几px*几px，然后平铺它页面当背景图。因为是背景图的缘故，所以无法将它放入雪碧图，而它却存在网站的很多页面，这种图片往往只有几十字节，却需要一个 http 请求，十分不值得。那么此时将它转化为 base64 编码，何乐而不为？

下面是一个只有 50 字节的2*2的的背景图。将其转化成 base64 编码，只有 100 多个字符，相比一个 http 请求，这种转换无疑更值得推崇。


作者：呼唤远方
链接：https://www.imooc.com/article/27804
来源：慕课网


说起Base64编码可能有些奇怪，因为大多数的编码都是由字符转化成二进制的过程，而从二进制转成字符的过程称为解码。而Base64的概念就恰好反了，由二进制转到字符称为编码，由字符到二进制称为解码。　

　Base64编码主要用在传输、存储、表示二进制等领域，还可以用来加密，但是这种加密比较简单，只是一眼看上去不知道什么内容罢了，当然也可以对Base64的字符序列进行定制来进行加密。
　
　　　Base64编码是从二进制到字符的过程，像一些中文字符用不同的编码转为二进制时，产生的二进制是不一样的，所以最终产生的Base64字符也不一样。例如"上网"对应utf-8格式的Base64编码是"5LiK572R"，对应GB2312格式的Base64编码是"yc/N+A=="。
　　　

作者：litongqian
链接：https://juejin.im/post/5bd00c0251882577787451f4
来源：掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

### 2. 雪碧图优缺点，怎么使用的？



使用CssSprites合并为一张大图：

	页面具有多种风格，需要换肤功能，可使用CssSprites
	
	网站已经趋于完美，不会再三天两头的改动（例如button大小、颜色等）
	
	使用时无需重复图形内容
	
	没有 Base64 编码成本，降低图片更新的维护难度。（但注意 Sprites 同时修改 css 和图片某些时候可能造成负担）
	
	不会增加 CSS 文件体积



使用base64直接把图片编码成字符串写入CSS文件：

	无额外请求
	
	对于极小或者极简单图片
	
	可像单独图片一样使用，比如背景图片重复使用等
	
	没有跨域问题，无需考虑缓存、文件头或者cookies问题  

 


作者：呼唤远方
链接：https://www.imooc.com/article/27804
来源：慕课网







