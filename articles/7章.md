## review
cookie 作用，缺点，小，浪费流量，不是每个资源都需要cookie  
localstorage, 大的，存在客户端数据，不交互  
sessionStorage, 会话基本浏览器存储  
indexDb 浏览器数据库，更复杂数据结构  
7-4，示例，  
service worker，独立于网页的在后台运行的脚本，可以实现离线数据处理，页面间通信   
document.cookie  
window.localStorage

## 7-1 cookie

目标： 

1. 理解localstorage、cookie、sessionstorage、indexdb的概念和使用2. 学习理解pwa和service worker的应用cookie:
	因为HTTP请求无状态，所以需要cookie去维持客户端状态	过期时间 expire	cookie的生成方式     1. http response header中的set-cookie     2. js中可以通过document.cookie可以读写cookie	仅仅作为浏览器存储（大小4KB左右，能力被localstorage替代）	cookie中在相关域名下面 —— cdn的流量损耗
		cookie中在相关域名下面, 只要是这个域名下的请求，都会携带某些cookie
		假如请求某个网站，某些cookie是没用的，例如访问静态文件不需要cookie
		cdn上存放静态文件，cdn的域名和主站域名分开。	httponly， 写了httponly的cookie 不能被js读写补充：
	
两个http请求之间不知道关系，http是无状态的，无法知道用户的登陆信息，如何维护用户信息，使用cookie，判断当前请求来源于哪个客户端。


两个作用：

	1. 用户浏览器端和服务器端的交互（当爹
	2. 客户端自身数据的存储（当妈

	
## 7-2 localstorage、SessionStorage

localstorage（当妈

	1.HTML5设计出来专门用于浏览器存储的	2.大小为5M左右	3.仅在客户端使用，不和服务端进行通信	4.接口封装较好	5.浏览器本地缓存方案	
	
比如直接把首屏信息从 localstorage 读取，比从服务器端获取快多了

	
SessionStorage( 临时当妈	

	会话级别的浏览器存储	大小为5M左右	仅在客户端使用，不和服务端进行通信	接口封装较好	对于表单信息的维护

表单，想缓存出生年月日，想刷新，但是不丢失  
分页表单，想后退后不丢失表单信息


## 7-3 浏览器端数据库


1. IndexedDB 是一种低级API，用于客户端存储大量结构化数据。该API使用索引来实现对该数据的高性能搜索。虽然 Web Storage 对于存储较少量的数据很有用，但对于存储更大量的结构化数据来说，这种方法不太有用。IndexedDB提供了一个解决方案。2. 为应用创建离线版本
	
## 7-4 浏览器存储——案例解析（imp!




httponly, 不能被js读写  
cookie会种在domian下，  
不需要携带cookie的请求，浪费流量，怎么处理


百度的静态资源，在和主域不同的域名下  
cdn域名不希望携带cookie，这是在浪费流量，与主站域名区分开


localStorage   
百度， 在application中，我们可以看到localStorage

localStorage中有很多，function


## 7-5 service workers

如果进行大规模的计算，js执行会阻塞UI渲染  
如何处理，不阻塞UI渲染  
此时需要service worker



Service Worker 是一个脚本，浏览器独立于当前网页，将其在后台运行,为实现一些不依赖页面或者用户交互的特性打开了一扇大门。在未来这些特性将包括推送消息,背景后台同步， geofencing（地理围栏定位），但它将推出的第一个首要特性，就是拦截和处理网络请求的能力，包括以编程方式来管理被缓存的响应。重点：
	
	可以拦截和处理 XHR
	用来做离线应用1. 使用拦截和处理网络请求能力，实现一个离线应用
2. 使用service worker 在后台运行同时能和页面通信的能力，去实现大规模后台数据的处理

## 7-6 PWA
 
PWA (Progressive Web Apps) 是一种 Web App 新模型，并不是具体指某一种前沿的技术或者某一个单一的知识点，我们从英文缩写来看就能看出来，这是一个渐进式的 Web App，是通过一系列新的 Web 特性，配合优秀的 UI 交互设计，逐步的增强 Web App 的用户体验。


> 特点

可靠：在没有网络的环境中也能提供基本的页面访问，而不会出现“未连接到互联网”的页面。

快速：针对网页渲染及网络数据访问有较好优化。
	
	wepapp切换页面有loading，相较于原生app体验不是很好

融入（Engaging）：应用可以被增加到手机桌面，并且和普通应用一样有全屏、推送等特性。



通过lighthouse 插件，看网站的 pwa 指标     

PWA 是未来移动端，性能和体验的大方向和标准


## 7-7 案例

service worker 介绍

## 7-8 cookie、localStorage、sessionStorage 等案例

如何通过js设置cookie?

```
document.cookie = "username=hello"
console.log(document.cookie)
```

localStorage?

```
if(window.localStorage) {
	localStorage.setItem('name', 'world')
	localStorage.getItem('name')
	
}
```
使用 localStorage 缓存 js 文件：

类似小程序里面的 setStorage

```
var  testJS = loacalStorage.getItem('test')
if(testJS) {
	eval(testJs)
}esle {
	request() {
	
		success: function(){
			localStorage.setItem('testJs', responseText)
		}
	}
}
```

sessonStorage

	api 和 localStorage 是一样的
	
	sessionStorage.setItem
	sessionStorage.getItem


## 7-9~7-13 todo, 后面的都没看


indexDB, service workers






	